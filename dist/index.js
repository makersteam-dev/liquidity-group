"use strict";(()=>{document.addEventListener("DOMContentLoaded",()=>{let c=window.location.search,u=new URLSearchParams(c).get("utm_source"),s=document.querySelector("#api_access");u==="key"&&(s.value="true")});var i=document.querySelector('input[name="email"]'),o=document.querySelector('input[name="company"]'),a=document.querySelector('input[name="country"]'),I=document.querySelector(".crisis-funding-field-wrapper.is--1"),E=document.querySelector(".crisis-funding-field-wrapper.is--2"),T=document.querySelector(".crisis-funding-field-wrapper.is--3"),L="^[a-zA-Z0-9._%+-]+@(?!gmail.com|yahoo.com|hotmail.com)[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$",S=()=>{i.value.toLowerCase().match(L)?i.classList.remove("is--error"):i.classList.add("is--error")},C=()=>{o.value===""?o.classList.add("is--error"):o.classList.remove("is--error")},w=()=>{a.value===""?a.classList.add("is--error"):a.classList.remove("is--error")};i.addEventListener("focusout",S);o.addEventListener("focusout",C);a.addEventListener("focusout",w);$('form[action^="https://api.hsforms.com"]').each(function(c){$(this).find("input[type=checkbox]").val("true"),$(this).submit(function(t){var m,p;t.preventDefault();let s=[...new FormData(t.target).entries()].map(e=>({name:e[0],value:e[1]})),f=(m=s.find(e=>e.name==="goToWebinarWebinarKey"))==null?void 0:m.value,g=(p=s.find(e=>e.name==="sfdcCampaignId"))==null?void 0:p.value,l=document.cookie.replace(/(?:(?:^|.*;\s*)hubspotutk\s*\=\s*([^;]*).*$)|^.*$/,"$1")||void 0;console.log(l);let r=$(this).find("[id*='gdpr-processing-prompt']"),d=s.filter(e=>e.name.includes("LEGAL_CONSENT")).map(e=>{let n=$(`#${e.name.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")}`)[0],v=$("span[for='"+$(n).attr("id").replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")+"']");return{value:n.checked,text:v.text(),subscriptionTypeId:parseInt(e.name.split("LEGAL_CONSENT.subscription_type_")[1])}}),y=["cc-num","cc-number","gdpr","LEGAL_CONSENT","goToWebinarWebinarKey","sfdcCampaignId"],h={fields:s.filter(e=>!y.find(n=>e.name.includes(n))),context:{pageUri:window.location.href,pageName:document.title,sfdcCampaignId:g,goToWebinarKey:f,hutk:l},...r?{legalConsentOptions:{consent:{...r?{consentToProcess:!0,text:r.text()}:{},...d?{communications:d}:{}}}}:{}},b=JSON.stringify(h);$.ajax({url:t.target.action,method:"POST",data:b,contentType:"application/json",success:function(e){if(e)if(e.inlineMessage){let n=$(t.target).parent();n.children("form").css("display","none"),n.children(".w-form-done").css("display","block")}else e.redirectUri&&(window.location.href=e.redirectUri);else console.log("response but no inlineMessage or redirectUri")},error:function(){console.log("error on the form submitting"),$(t.target).css("display","none").siblings(".w-form-fail").css("display","block")}})})});$(".crisis-funding-label.is--in-focus").removeClass("is--in-focus");$(".mt-input").on("focusin",function(){$(this).siblings(".crisis-funding-label").addClass("is--in-focus")});$(".mt-input").on("focusout",function(){$(this).val()===""&&$(this).siblings(".crisis-funding-label").removeClass("is--in-focus"),$(this).val()!==""&&$(this).siblings(".crisis-funding-label").addClass("is--in-focus")});})();
